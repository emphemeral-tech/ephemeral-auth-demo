<!DOCTYPE html>
<html>
<head>
    <title>Ephemeral Auth vs Token Auth - BANKING SECURITY DEMO</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .demo-container { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .demo-box { border: 3px solid; padding: 20px; border-radius: 10px; background: white; min-height: 650px; }
        .token-demo { border-color: #ff4444; }
        .ephemeral-demo { border-color: #44ff44; }
        
        .login-form { background: #f9f9f9; padding: 15px; border-radius: 5px; margin: 10px 0; }
        input { padding: 8px; margin: 5px; width: 200px; }
        button { margin: 5px; padding: 10px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; }
        .login-btn { background: #007bff; color: white; }
        .action-btn { background: #28a745; color: white; }
        .hacker-btn { background: #ffc107; color: black; }
        
        .session-display { background: #e9ecef; padding: 15px; margin: 10px 0; border-radius: 5px; min-height: 80px; }
        .user-status { background: #d4edda; padding: 10px; border-radius: 5px; margin: 10px 0; }
        .log { background: #000; color: #0f0; padding: 10px; margin: 10px 0; border-radius: 5px; max-height: 250px; overflow-y: auto; font-family: monospace; font-size: 12px; }
        
        .explanation { background: #e3f2fd; padding: 15px; border-radius: 5px; margin: 10px 0; }
        .bank-balance { background: #fff3cd; padding: 10px; border-radius: 5px; margin: 10px 0; font-weight: bold; }
        
        .danger-zone { background: #ffeaa7; padding: 10px; border-radius: 5px; margin: 10px 0; border: 2px dashed #e17055; }
        .security-win { background: #a3e4d7; padding: 10px; border-radius: 5px; margin: 10px 0; border: 2px solid #16a085; }
    </style>
</head>
<body>
    <h1>üè¶ BANKING SECURITY SHOWDOWN: Token vs Ephemeral Auth</h1>
    <p><strong>Same user. Same bank. DRAMATICALLY different security outcomes!</strong></p>
    
    <div class="demo-container">
        <!-- TOKEN AUTH SIDE -->
        <div class="demo-box token-demo">
            <h2>üîì TRADITIONAL TOKEN AUTH</h2>
            <p><em>Login once ‚Üí Unlimited transfers for 2 HOURS</em></p>
            
            <div class="login-form">
                <h3>Bank Login</h3>
                <input type="text" id="tokenUsername" placeholder="Username" value="john@bank.com">
                <input type="password" id="tokenPassword" placeholder="Password" value="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"><br>
                <button class="login-btn" onclick="tokenLogin()">üîë Login & Get Token</button>
            </div>
            
            <div class="bank-balance" id="tokenBalance">
                <strong>Bank Balance:</strong> $10,000.00
            </div>
            
            <div class="user-status" id="tokenUserStatus">
                <strong>Status:</strong> Not logged in
            </div>
            
            <button class="action-btn" onclick="tokenBankTransfer()">üí∏ Make Bank Transfer</button>
            <button class="action-btn" onclick="tokenViewStatement()">üìä View Account Statement</button>
            
            <div class="danger-zone">
                <button class="hacker-btn" onclick="stealToken()">üëπ SIMULATE TOKEN THEFT</button>
                <p><small>See what happens when hacker gets your token</small></p>
            </div>
            
            <div class="session-display" id="tokenDisplay">
                <strong>TOKEN STATUS:</strong> No active session
            </div>
            
            <div class="log" id="tokenLog"></div>
        </div>

        <!-- EPHEMERAL AUTH SIDE -->
        <div class="demo-box ephemeral-demo">
            <h2>‚úÖ EPHEMERAL AUTH</h2>
            <p><em>Each transfer ‚Üí Fresh authentication ‚Üí Session VANISHES</em></p>
            
            <div class="login-form">
                <h3>Bank Login</h3>
                <input type="text" id="ephemeralUsername" placeholder="Username" value="john@bank.com">
                <input type="password" id="ephemeralPassword" placeholder="Password" value="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"><br>
                <button class="login-btn" onclick="ephemeralLogin()">üéØ Login & Get Ephemeral</button>
            </div>
            
            <div class="explanation">
                <strong>üí° How It Works:</strong><br>
                ‚Ä¢ Each action requires fresh cryptographic proof<br>
                ‚Ä¢ Re-authentication happens automatically<br>
                ‚Ä¢ User experience feels seamless<br>
                ‚Ä¢ Security is maximum
            </div>
            
            <div class="bank-balance" id="ephemeralBalance">
                <strong>Bank Balance:</strong> $10,000.00
            </div>
            
            <div class="user-status" id="ephemeralUserStatus">
                <strong>Status:</strong> Not logged in
            </div>
            
            <button class="action-btn" onclick="ephemeralBankTransfer()">üí∏ Make Bank Transfer</button>
            <button class="action-btn" onclick="ephemeralViewStatement()">üìä View Account Statement</button>
            
            <div class="security-win">
                <button class="hacker-btn" onclick="stealEphemeral()">üëπ TRY TO STEAL SESSION</button>
                <p><small>See why hackers get almost nothing</small></p>
            </div>
            
            <div class="session-display" id="ephemeralDisplay">
                <strong>SESSION STATUS:</strong> No active session
            </div>
            
            <div class="log" id="ephemeralLog"></div>
        </div>
    </div>

    <script>
        // TOKEN AUTH - DANGEROUS BANKING
        let userToken = null;
        let tokenUser = null;
        let tokenBalance = 10000;
        let tokenTransfers = [];

        function tokenLogin() {
            const username = document.getElementById('tokenUsername').value;
            userToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.' + Math.random().toString(36).substr(2, 20);
            tokenUser = username;
            
            document.getElementById('tokenUserStatus').innerHTML = 
                `<strong>‚úÖ BANK LOGGED IN:</strong> ${username}<br>
                 <em>Token valid for 2 HOURS - Unlimited transfers</em>`;
                 
            document.getElementById('tokenDisplay').innerHTML = 
                `<strong>üîë ACTIVE BANKING TOKEN:</strong><br>
                 ${userToken.substr(0, 30)}...<br>
                 <span style="color: red;">‚è∞ Valid for 2 HOURS</span>`;
            
            logToken(`üîë ${username} logged into bank ‚Üí Got JWT token`);
            logToken('‚ö†Ô∏è  This token allows UNLIMITED transfers for 2 HOURS');
        }

        function tokenBankTransfer() {
            if (!userToken) {
                logToken('‚ùå Please login to bank first');
                return;
            }
            
            const amount = (Math.random()*500 + 100).toFixed(2);
            tokenBalance -= parseFloat(amount);
            tokenTransfers.push(amount);
            
            document.getElementById('tokenBalance').innerHTML = 
                `<strong>Bank Balance:</strong> $${tokenBalance.toFixed(2)}`;
            
            logToken(`üí∏ BANK TRANSFER #${tokenTransfers.length}: $${amount} sent`);
            logToken(`üìä Remaining balance: $${tokenBalance.toFixed(2)}`);
            logToken('‚úÖ Token STILL ACTIVE - Can make unlimited more transfers!');
            
            if (tokenTransfers.length === 3) {
                logToken('üö® DANGER: Hacker could make 100+ transfers with same token!');
            }
        }

        function tokenViewStatement() {
            if (!userToken) {
                logToken('‚ùå Please login first');
                return;
            }
            logToken(`üìä ACCOUNT STATEMENT: ${tokenTransfers.length} transfers today`);
            logToken('‚úÖ Token STILL VALID for banking operations');
        }

        function stealToken() {
            if (!userToken) {
                logToken('üëπ Hacker: No banking token to steal!');
                return;
            }
            
            logToken('üö® üö® üö® BANKING TOKEN STOLEN BY HACKER!');
            logToken(`üëπ Hacker: I have ${tokenUser}\'s banking token!`);
            logToken('üëπ Hacker: Time to empty this account!');
            
            let hackerBalance = tokenBalance;
            let hackerTransfers = 0;
            
            const hackerInterval = setInterval(() => {
                hackerTransfers++;
                const amount = Math.min(1000, hackerBalance * 0.3); // Take 30% each time
                hackerBalance -= amount;
                
                logToken(`üëπ Hacker: Transfer #${hackerTransfers}: $${amount.toFixed(2)} to my account!`);
                logToken(`üëπ Hacker: Remaining: $${hackerBalance.toFixed(2)}`);
                
                if (hackerTransfers >= 5 || hackerBalance < 100) {
                    clearInterval(hackerInterval);
                    const totalStolen = (tokenBalance - hackerBalance).toFixed(2);
                    logToken(`üíÄ Hacker: Stole $${totalStolen} total!`);
                    logToken(`üòà Hacker: Could keep transferring for 2 HOURS!`);
                    
                    // Update actual balance
                    tokenBalance = hackerBalance;
                    document.getElementById('tokenBalance').innerHTML = 
                        `<strong>Bank Balance:</strong> $${tokenBalance.toFixed(2)}`;
                }
            }, 1000);
        }

        function logToken(message) {
            const log = document.getElementById('tokenLog');
            log.innerHTML += `<div>${new Date().toLocaleTimeString()}: ${message}</div>`;
            log.scrollTop = log.scrollHeight;
        }

        // EPHEMERAL AUTH - SECURE BANKING
        let ephemeralUser = null;
        let currentSession = null;
        let ephemeralBalance = 10000;
        let ephemeralTransfers = [];
        let autoReauth = false;

        function ephemeralLogin() {
            const username = document.getElementById('ephemeralUsername').value;
            document.getElementById('ephemeralUserStatus').innerHTML = 
                `<strong>üîê SOLVING BANK CHALLENGE:</strong> ${username}`;
            document.getElementById('ephemeralDisplay').innerHTML = 
                '<strong>üéØ BANK SECURITY CHALLENGE:</strong> Verifying cryptographic proof...';
            
            logEphemeral(`üéØ ${username} requested bank authentication`);
            
            // Simulate solving cryptographic proof
            setTimeout(() => {
                ephemeralUser = username;
                currentSession = 'eph_bank_' + Math.random().toString(36).substr(2, 12);
                
                document.getElementById('ephemeralUserStatus').innerHTML = 
                    `<strong>‚úÖ BANK AUTHENTICATED:</strong> ${username}<br>
                     <em>Secure session ready for ONE action</em>`;
                     
                document.getElementById('ephemeralDisplay').innerHTML = 
                    `<strong>‚ö° EPHEMERAL BANK SESSION:</strong><br>
                     ${currentSession}<br>
                     <span style="color: green;">üí® Vanishes after ONE banking action</span>`;
                
                logEphemeral('‚úÖ Cryptographic proof solved ‚Üí Secure banking session created');
                logEphemeral('‚ö†Ô∏è  Session will SELF-DESTRUCT after single banking action');
            }, 1000);
        }

        function ephemeralBankTransfer() {
            if (!currentSession) {
                logEphemeral('‚ùå Please authenticate with bank first');
                return;
            }
            
            const amount = (Math.random()*500 + 100).toFixed(2);
            ephemeralBalance -= parseFloat(amount);
            ephemeralTransfers.push(amount);
            
            document.getElementById('ephemeralBalance').innerHTML = 
                `<strong>Bank Balance:</strong> $${ephemeralBalance.toFixed(2)}`;
            
            logEphemeral(`üí∏ BANK TRANSFER: $${amount} sent`);
            logEphemeral(`üìä Remaining balance: $${ephemeralBalance.toFixed(2)}`);
            logEphemeral('üí® Banking session USED for this transfer ‚Üí VANISHING...');
            
            // Session vanishes after ONE transaction
            setTimeout(() => {
                currentSession = null;
                document.getElementById('ephemeralDisplay').innerHTML = 
                    '<strong>üí® BANKING SESSION VANISHED</strong><br>Next transfer requires fresh authentication';
                document.getElementById('ephemeralUserStatus').innerHTML = 
                    `<strong>üîí RE-AUTHENTICATION NEEDED:</strong> ${ephemeralUser}<br>
                     <em>Session destroyed after transfer - Standard security</em>`;
                logEphemeral('‚úÖ Security: Session destroyed after ONE banking action');
                logEphemeral('üîí Next transfer requires fresh cryptographic proof');
            }, 1500);
        }

        function ephemeralViewStatement() {
            if (!currentSession) {
                logEphemeral('‚ùå Please authenticate first');
                return;
            }
            
            logEphemeral(`üìä ACCOUNT STATEMENT: ${ephemeralTransfers.length} transfers today`);
            logEphemeral('üí® Session USED for statement view ‚Üí VANISHING...');
            
            setTimeout(() => {
                currentSession = null;
                document.getElementById('ephemeralDisplay').innerHTML = 
                    '<strong>üí® SESSION VANISHED</strong><br>Session destroyed after use';
                logEphemeral('‚úÖ Security: Session destroyed after viewing statement');
            }, 1500);
        }

        function stealEphemeral() {
            if (!currentSession) {
                logEphemeral('üëπ Hacker: No banking session to steal!');
                return;
            }
            
            logEphemeral('üëπ Hacker: Stole the ephemeral banking session!');
            logEphemeral('üëπ Hacker: Let me try to empty this account...');
            
            setTimeout(() => {
                const amount = Math.min(1000, ephemeralBalance * 0.5);
                ephemeralBalance -= amount;
                document.getElementById('ephemeralBalance').innerHTML = 
                    `<strong>Bank Balance:</strong> $${ephemeralBalance.toFixed(2)}`;
                
                logEphemeral(`üëπ Hacker: Made ONE transfer: $${amount.toFixed(2)} to my account!`);
                logEphemeral(`üëπ Hacker: Balance now: $${ephemeralBalance.toFixed(2)}`);
                
                setTimeout(() => {
                    logEphemeral('üëπ Hacker: Trying to make SECOND transfer...');
                    logEphemeral('üí® Hacker: Session VANISHED after my ONE transfer!');
                    logEphemeral('‚ùå Hacker: Second transfer DENIED - No session!');
                    logEphemeral('üò° Hacker: I only got ONE transfer! Maximum damage: $' + amount.toFixed(2));
                    logEphemeral('‚úÖ SECURITY WIN: Hacker limited to SINGLE transaction');
                    
                    currentSession = null;
                    document.getElementById('ephemeralDisplay').innerHTML = 
                        '<strong>üí® SESSION STOLEN & USED</strong><br>Hacker limited to ONE banking action';
                    document.getElementById('ephemeralUserStatus').innerHTML = 
                        `<strong>üîí SECURITY PROTECTED:</strong> ${ephemeralUser}<br>
                         <em>Hacker stole session but got only ONE transfer</em>`;
                }, 1000);
            }, 500);
        }

        function logEphemeral(message) {
            const log = document.getElementById('ephemeralLog');
            log.innerHTML += `<div>${new Date().toLocaleTimeString()}: ${message}</div>`;
            log.scrollTop = log.scrollHeight;
        }
    </script>
</body>
</html>